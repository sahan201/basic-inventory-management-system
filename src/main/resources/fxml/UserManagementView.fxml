<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<VBox
        fx:controller="com.example.dummy_inventory.controller.UserManagementController"
        xmlns:fx="http://javafx.com/fxml/1"
        xmlns="http://javafx.com/javafx/17"
        spacing="15"
        style="-fx-background-color: #f5f5f5;"
>
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label text="ðŸ‘¥ User Management" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <TextField
                fx:id="searchField"
                promptText="ðŸ” Search users..."
                prefWidth="250"
                style="-fx-background-radius: 8; -fx-padding: 8;"
        />
        <Button
                text="Search"
                onAction="#handleSearch"
                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
        >
            <font><Font name="System Bold" size="12"/></font>
        </Button>
    </HBox>

    <!-- Main Content -->
    <SplitPane dividerPositions="0.65" VBox.vgrow="ALWAYS">

        <!-- LEFT: Table View -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 15;">
            <Label text="Users List" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

            <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="userIdColumn" text="ID" prefWidth="50"/>
                    <TableColumn fx:id="usernameColumn" text="Username" prefWidth="120"/>
                    <TableColumn fx:id="fullNameColumn" text="Full Name" prefWidth="150"/>
                    <TableColumn fx:id="emailColumn" text="Email" prefWidth="180"/>
                    <TableColumn fx:id="roleColumn" text="Role" prefWidth="100"/>
                    <TableColumn fx:id="activeColumn" text="Active" prefWidth="70"/>
                    <TableColumn fx:id="lastLoginColumn" text="Last Login" prefWidth="150"/>
                </columns>
            </TableView>

            <!-- Table Actions -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button
                        text="âœ Edit"
                        onAction="#handleEdit"
                        style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
                >
                    <font><Font name="System Bold" size="12"/></font>
                </Button>
                <Button
                        text="ðŸ—‘ Delete"
                        onAction="#handleDelete"
                        style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
                >
                    <font><Font name="System Bold" size="12"/></font>
                </Button>
                <Button
                        text="ðŸ”‘ Reset Password"
                        onAction="#handleResetPassword"
                        style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
                >
                    <font><Font name="System Bold" size="12"/></font>
                </Button>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>
        </VBox>

        <!-- RIGHT: Form Panel -->
        <VBox spacing="15" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20;">
            <Label text="User Details" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

            <Separator/>

            <!-- Form Fields -->
            <VBox spacing="10">
                <!-- Username -->
                <VBox spacing="5">
                    <Label text="Username:" style="-fx-font-weight: bold;"/>
                    <TextField
                            fx:id="usernameField"
                            promptText="Enter username"
                            style="-fx-background-radius: 5; -fx-padding: 8;"
                    />
                </VBox>

                <!-- Full Name -->
                <VBox spacing="5">
                    <Label text="Full Name:" style="-fx-font-weight: bold;"/>
                    <TextField
                            fx:id="fullNameField"
                            promptText="Enter full name"
                            style="-fx-background-radius: 5; -fx-padding: 8;"
                    />
                </VBox>

                <!-- Email -->
                <VBox spacing="5">
                    <Label text="Email:" style="-fx-font-weight: bold;"/>
                    <TextField
                            fx:id="emailField"
                            promptText="Enter email address"
                            style="-fx-background-radius: 5; -fx-padding: 8;"
                    />
                </VBox>

                <!-- Password -->
                <VBox spacing="5">
                    <Label text="Password:" style="-fx-font-weight: bold;"/>
                    <PasswordField
                            fx:id="passwordField"
                            promptText="Enter password (leave empty to keep current)"
                            style="-fx-background-radius: 5; -fx-padding: 8;"
                    />
                </VBox>

                <!-- Role -->
                <VBox spacing="5">
                    <Label text="Role:" style="-fx-font-weight: bold;"/>
                    <ComboBox
                            fx:id="roleComboBox"
                            prefWidth="250"
                            style="-fx-background-radius: 5;"
                    />
                </VBox>

                <!-- Active Status -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <CheckBox
                            fx:id="activeCheckBox"
                            text="Active User"
                            style="-fx-font-weight: bold;"
                    />
                </HBox>
            </VBox>

            <Separator/>

            <!-- Form Actions -->
            <HBox spacing="10" alignment="CENTER">
                <Button
                        fx:id="saveButton"
                        text="ðŸ’¾ Create User"
                        onAction="#handleSave"
                        prefWidth="140"
                        style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand;"
                >
                    <font><Font name="System Bold" size="13"/></font>
                </Button>
                <Button
                        fx:id="clearButton"
                        text="ðŸ”„ Clear"
                        onAction="#handleClear"
                        prefWidth="100"
                        style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand;"
                >
                    <font><Font name="System Bold" size="13"/></font>
                </Button>
            </HBox>

            <!-- Status Label -->
            <Label
                    fx:id="statusLabel"
                    text=""
                    wrapText="true"
                    style="-fx-text-fill: #27ae60; -fx-font-size: 12; -fx-font-weight: bold;"
            />

            <!-- Spacer -->
            <Region VBox.vgrow="ALWAYS"/>

            <!-- Info Panel -->
            <VBox spacing="5" style="-fx-background-color: #ecf0f1; -fx-padding: 10; -fx-background-radius: 5;">
                <Label text="ðŸ’¡ Admin Only:" style="-fx-font-weight: bold; -fx-font-size: 12;"/>
                <Label text="â€¢ Select user to edit" style="-fx-font-size: 11;"/>
                <Label text="â€¢ ADMIN can manage all users" style="-fx-font-size: 11;"/>
                <Label text="â€¢ MANAGER has view-only access" style="-fx-font-size: 11;"/>
                <Label text="â€¢ Password required for new users" style="-fx-font-size: 11;"/>
            </VBox>
        </VBox>
    </SplitPane>
</VBox>
