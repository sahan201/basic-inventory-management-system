<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<VBox
        fx:controller="com.example.dummy_inventory.controller.ReportsController"
        xmlns:fx="http://javafx.com/fxml/1"
        xmlns="http://javafx.com/javafx/17"
        spacing="15"
        style="-fx-background-color: #f5f5f5;"
>
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label text="ðŸ“Š Reports & Analytics" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #333333;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button
                text="ðŸ”„ Refresh"
                onAction="#handleRefresh"
                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
        >
            <font><Font name="System Bold" size="12"/></font>
        </Button>
    </HBox>

    <!-- Dashboard Statistics -->
    <GridPane hgap="15" vgap="15">
        <columnConstraints>
            <ColumnConstraints percentWidth="33.33"/>
            <ColumnConstraints percentWidth="33.33"/>
            <ColumnConstraints percentWidth="33.33"/>
        </columnConstraints>

        <!-- Total Revenue Card -->
        <VBox GridPane.columnIndex="0" spacing="5" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
            <Label text="ðŸ’° Total Revenue" style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
            <Label fx:id="totalRevenueLabel" text="$0.00" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #27ae60;">
                <font><Font name="System Bold" size="24"/></font>
            </Label>
        </VBox>

        <!-- Total Products Card -->
        <VBox GridPane.columnIndex="1" spacing="5" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
            <Label text="ðŸ“¦ Total Products" style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
            <Label fx:id="totalProductsLabel" text="0" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #3498db;">
                <font><Font name="System Bold" size="24"/></font>
            </Label>
        </VBox>

        <!-- Total Categories Card -->
        <VBox GridPane.columnIndex="2" spacing="5" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
            <Label text="ðŸ“ Total Categories" style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
            <Label fx:id="totalCategoriesLabel" text="0" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #9b59b6;">
                <font><Font name="System Bold" size="24"/></font>
            </Label>
        </VBox>
    </GridPane>

    <!-- Second Row of Stats -->
    <GridPane hgap="15" vgap="15">
        <columnConstraints>
            <ColumnConstraints percentWidth="33.33"/>
            <ColumnConstraints percentWidth="33.33"/>
            <ColumnConstraints percentWidth="33.33"/>
        </columnConstraints>

        <!-- Low Stock Count Card -->
        <VBox GridPane.columnIndex="0" spacing="5" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
            <Label text="âš ï¸ Low Stock Items" style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
            <Label fx:id="lowStockCountLabel" text="0" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #e74c3c;">
                <font><Font name="System Bold" size="24"/></font>
            </Label>
        </VBox>

        <!-- Inventory Value Card -->
        <VBox GridPane.columnIndex="1" spacing="5" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
            <Label text="ðŸ’Ž Inventory Value" style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
            <Label fx:id="inventoryValueLabel" text="$0.00" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #f39c12;">
                <font><Font name="System Bold" size="24"/></font>
            </Label>
        </VBox>

        <!-- Total Profit Card -->
        <VBox GridPane.columnIndex="2" spacing="5" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
            <Label text="ðŸ“ˆ Total Profit" style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
            <Label fx:id="totalProfitLabel" text="$0.00" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #16a085;">
                <font><Font name="System Bold" size="24"/></font>
            </Label>
        </VBox>
    </GridPane>

    <!-- Report Generation Section -->
    <VBox spacing="15" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 20;" VBox.vgrow="ALWAYS">
        <Label text="Generate Reports" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

        <Separator/>

        <!-- Report Controls -->
        <HBox spacing="15" alignment="CENTER_LEFT">
            <VBox spacing="5">
                <Label text="Report Type:" style="-fx-font-weight: bold;"/>
                <ComboBox
                        fx:id="reportTypeComboBox"
                        promptText="Select report type..."
                        prefWidth="250"
                        style="-fx-background-radius: 5;"
                />
            </VBox>

            <VBox spacing="5">
                <Label text="Start Date:" style="-fx-font-weight: bold;"/>
                <DatePicker
                        fx:id="startDatePicker"
                        promptText="Start date"
                        prefWidth="150"
                        style="-fx-background-radius: 5;"
                />
            </VBox>

            <VBox spacing="5">
                <Label text="End Date:" style="-fx-font-weight: bold;"/>
                <DatePicker
                        fx:id="endDatePicker"
                        promptText="End date"
                        prefWidth="150"
                        style="-fx-background-radius: 5;"
                />
            </VBox>

            <VBox spacing="5">
                <Label text=" "/> <!-- Spacer for alignment -->
                <Button
                        text="ðŸ“Š Generate Report"
                        onAction="#handleGenerateReport"
                        style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand;"
                >
                    <font><Font name="System Bold" size="12"/></font>
                </Button>
            </VBox>
        </HBox>

        <!-- Report Output -->
        <VBox spacing="10" VBox.vgrow="ALWAYS">
            <Label text="Report Output:" style="-fx-font-weight: bold;"/>
            <TextArea
                    fx:id="reportTextArea"
                    promptText="Report will be displayed here..."
                    wrapText="true"
                    editable="false"
                    prefHeight="300"
                    style="-fx-font-family: 'Courier New'; -fx-font-size: 12; -fx-background-radius: 5;"
                    VBox.vgrow="ALWAYS"
            />
        </VBox>

        <!-- Export Actions -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Button
                    text="ðŸ“¤ Export Products CSV"
                    onAction="#handleExportProducts"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
            >
                <font><Font name="System Bold" size="12"/></font>
            </Button>
            <Button
                    text="ðŸ“¤ Export Sales CSV"
                    onAction="#handleExportSales"
                    style="-fx-background-color: #16a085; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 20; -fx-cursor: hand;"
            >
                <font><Font name="System Bold" size="12"/></font>
            </Button>
            <Region HBox.hgrow="ALWAYS"/>
            <Label
                    fx:id="statusLabel"
                    text=""
                    style="-fx-font-size: 12; -fx-font-weight: bold;"
            />
        </HBox>
    </VBox>
</VBox>
